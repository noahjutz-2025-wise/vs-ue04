# Direct Messages Server

## Protocol

### Request

- TYPE
  - 00 Register
  - 01 Send
  - 10 Get
- REQID: Generated by client
- LENGTH: 0-255
- Double LENGTH: 0-65535

Register request

```
+--------+--------+--------+--------+--------+
|TYPE    |REQID   |LENGTH  |USER...          |
+--------+--------+--------+--------+--------+
```

Send request

```
+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+
|TYPE    |REQID   |LENGTH  |USER...          |LENGTH  |RECIP...         |LENGTH           |MSG...           |
+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+
```

Get request

```
+--------+--------+--------+--------+--------+
|TYPE    |REQID   |LENGTH  |USER...          |
+--------+--------+--------+--------+--------+
```

### Response

- STATUS
  - 00 OK
  - 01 Request malformed
  - 11 Internal error

Status response

```
+--------+--------+
|REQID   |STATUS  |
+--------+--------+
```

Get response

```
+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+
|REQID   |STATUS  |AMOUNT MSGs      |LENGTH  |SENDER...        |LENGTH  |RECIP...         |LENGTH           |MSG...           |
+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+
```
