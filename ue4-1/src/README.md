# Direct Messages Server

## Protocol

- TYPE
  - 0 ReqRegister
  - 1 ReqSend
  - 2 ReqGet
  - 3 ResStatus
  - 4 ResGet
- REQID: Generated by client
- LENGTH: 0-255
- LENGTH LENGTH: 0-65535

### Request

Register request

```
+--------+--------+--------+--------+
|TYPE    |REQID   |LENGTH  |USER...
+--------+--------+--------+--------+
 ...     |
+--------+
```

Example: 0 0 4 noah (0x00 00 04 6e6f6168)

Send request

```
+--------+--------+--------+--------+
|TYPE    |REQID   |LENGTH  |USER...
+--------+--------+--------+--------+
 ...     |LENGTH  |RECIP...         |
+--------+--------+--------+--------+
|LENGTH   LENGTH  |MSG...           |
+--------+--------+--------+--------+
```

Get request

```
+--------+--------+--------+--------+
|TYPE    |REQID   |LENGTH  |USER...
+--------+--------+--------+--------+
 ...     |
+--------+
```

### Response

- STATUS
  - 0 OK
  - 1 Request malformed
  - 2 Internal error

Status response

```
+--------+--------+--------+
|TYPE    |REQID   |STATUS  |
+--------+--------+--------+
```

Get response

```
+--------+--------+--------+--------+
|TYPE    |REQID   |STATUS  |AMOUNT
+--------+--------+--------+--------+
 AMOUNT  |LENGTH  |SENDER...        |
+--------+--------+--------+--------+
|LENGTH  |RECIP...         |LENGTH
+--------+--------+--------+--------+
 LENGTH  |MSG...           |
+--------+--------+--------+
```
